##########################
 ## Tmux Config - TjlH ##
##########################

### External

# don't want it to behave as a login shell each time
# FIXME: vim-screen spawns a new shell before the intended command.
set-option -g	default-command	    "exec /bin/bash"
# Want to keep the COLORTERM env var so colours can be set properly in bash/vim
set-option -ag	update-environment  "COLORTERM"
# Allow use of terminal alternate screen feature (terminfo)
set-window-option -g	alternate-screen    on

### General

## Prefix Key
#set-option -g prefix C-Escape
set-option -g	prefix	`		# def: C-b	# screen def: C-a
set-option -g	prefix2 C-a		# def: none
bind-key -r a	send-prefix		# def: C-b
unbind-key  C-b

bind-key    r	source-file	~/.tmux.conf	# Allow Reload
set-option -g	history-limit	1536		# Big History
set-option -s	escape-time	300		# Allow faster key repetition

## Use utf8
set-option -g	status-utf8	on	# def: off
set-window-option -g	utf8	on	# def: off

## Session Locking
#set-option -g	lock-after-time	300	# def: 0	# enable locking
set-option -g	lock-server	off	# def: on	# independent locking
# (I don't normally have lock(1) so try and use vlock first...)
set-option -g	lock-command	"vlock || busybox vlock || lock -np"

### Navigation

# vi like (auto set if 'vi' in $EDITOR, but if using my conf, tough shit!)
set-option -g	status-keys	    vi
set-window-option -g	mode-keys   vi

## windows (vim tabs)
set-option -g	base-index  1		# def: 0	# 0 on other side
bind-key    `	last-window		# def: n/a	# screen def: C-a ??
bind-key -r t	next-window		# def: n
bind-key -r T	previous-window		# def: p
bind-key    C-w choose-window		# def: w
bind-key -r n	new-window		# def: c

## panes (vim windows)
bind-key -r h	select-pane -L		# def: Left
bind-key -r j	select-pane -D		# def: Down
bind-key -r k	select-pane -U		# def: Up
bind-key -r l	select-pane -R		# def: Right
bind-key -r w	select-pane -t :.+	# def: o	# next pane numerically
bind-key -r W	select-pane -t :.-	# def: n/a	# previous numerically

## Allow Mouse Interaction
set-option -g	mouse-select-window on	# def: off
set-option -g	mouse-resize-pane   on	# def: off
set-option -g	mouse-select-pane   on	# def: off
set-window-option -g	mode-mouse  on	# def: off


### Viewing

set-window-option -g	aggressive-resize   on	# Always maximise window
bind-key -r o	rotate-window -D	# def: C-o
bind-key -r O	rotate-window -U	# def: n/a
bind-key -r b	break-pane		# def: !
bind-key -r B	break-pane -d		# background break
bind-key -r u	join-pane -t :+		# unbreak, -r allows cycling windows
bind-key -r U	join-pane -t :-		# unbreak backwards
bind-key -r v	join-pane -ht :+	# unbreak (vertiacal split)
bind-key -r V	join-pane -ht :-	# unbreak (vertiacal split) backwards
bind-key -r H	resize-pane -L		# def: C-Left
bind-key -r J	resize-pane -D		# def: C-Down
bind-key -r K	resize-pane -U		# def: C-Up
bind-key -r L	resize-pane -R		# def: C-Right
bind-key -r (	switch-client -p	# def: (
bind-key -r )	switch-client -n	# def: )
bind-key -r {	swap-window -t :-	# def: none
bind-key -r }	swap-window -t :+	# def: none
bind-key -r [	swap-pane -D		# def: }
bind-key -r ]	swap-pane -U		# def: {

## copy mode
bind-key    y	copy-mode		# def: [
bind-key    p	paste-buffer		# def: ]
bind-key    P	choose-buffer		# def: =
bind-key -n C-Up    copy-mode #| scroll-up	# def: none
bind-key -n C-PPage copy-mode -u	# def: prefix PPage	# FIXME
#bind-key -n S-Up copy-mode | top-line	# Scroll up buffer like a vt
#bind-key -n S-PPage copy-mode -u	# Scroll up buffer like a vt
bind-key -t	vi-copy Escape	cancel		# def: C-c
bind-key -t	vi-copy	v   begin-selection	# def: Space	# like 'visual'
bind-key -t	vi-copy	y   copy-selection	# def: Enter	# like 'yank'
bind-key -t	vi-copy	C-Up	scroll-up	# def: C-Up	# FIXME
bind-key -t	vi-copy	C-Down	scroll-down	# def: C-Down	# FIXME
bind-key -t	vi-copy	C-PPage	page-up		# def: PPage	# FIXME
bind-key -t	vi-copy	C-NPage	page-down	# def: NPage	# FIXME

## edit mode
#bind-key -t	vi-edit	Escape	switch-mode	# def: Escape
bind-key -t	vi-edit	C-c	cancel		# def: C-c
bind-key -t	vi-edit	Tab	complete	# def: Tab
bind-key -t	vi-edit	C-u	delete-line	# def: C-u
bind-key -t	vi-edit	Up	history-up	# def: none
bind-key -t	vi-edit	Down	history-down	# def: none
bind-key -t	vi-edit	Left	cursor-left	# def: none
bind-key -t	vi-edit	Right	cursor-right	# def: none
#bind-key -ct	vi-edit	i	switch-mode	# def: i
bind-key -ct	vi-edit	Escape	cancel		# def: C-c
#bind-key -ct	vi-edit	A	end-of-line | switch-mode
#bind-key -ct	vi-edit	C	delete-end-of-line | switch-mode
#bind-key -ct	vi-edit	S	delete-line | switch-mode
bind-key -ct	vi-edit	p	paste


### Look

## Monitor
set-option -g	visual-activity		    on
set-window-option -g	monitor-activity    on

## Status line
set-option -g	status-interval	    30		# def: 15	# redrawing interval
set-option -g	status-justify	    centre	# def: left	# window name location
set-option -g	status-left	    '[%H:%M %d-%b-%y]'	# def: '[#S]'
set-option -g	status-left-length  23		# def: 10
set-option -g	status-right	    '[#S:#I.#P]'	# def: '"#24T" %T %d-%b-%y'
set-option -g	status-right-length 40		# def: 40

## Prettify
# Message
#set-option -g	message-attr	none		# def: none
set-option -g	message-bg	'#440044'	# def: yellow
set-option -g	message-fg	'#FFFFFF'	# def: black
#set-option -g	message-command-attr	none		# def: none
set-option -g	message-command-bg	'#440044'	# def: black
set-option -g	message-command-fg	'#CCCCCC'	# def: yellow
# Status
set-option -g	status-attr	bold		# def: none
set-option -g	status-bg	'#440066'	# def: green
set-option -g	status-fg	'#000000'	# def: black
# status-\(left\|right\)-\(.*\) def: status-\2
#set-option -g status-left-attr
set-option -g status-left-bg	'#7700AA'
#set-option -g status-left-fg
#set-option -g status-right-attr
set-option -g status-right-bg	'#7700AA'
#set-option -g status-right-fg
# Window (Status)
# window-status-\(.*\) def: status-\1
#set-window-option -g	window-status-attr
#set-window-option -g	window-status-bg 
#set-window-option -g	window-status-fg
# window-status-\(current\|content\|activity\)-\(.*\) def: window-status-\2
set-window-option -g	window-status-current-bg	'#CC00FF'
#set-window-option -g	window-status-current-fg
#set-window-option -g	window-status-content-attr
#set-window-option -g	window-status-content-bg
#set-window-option -g	window-status-content-fg
set-window-option -g	window-status-activity-attr	none	# def: reverse
set-window-option -g	window-status-activity-bg	'#AA00AA'
#set-window-option -g	window-status-activity-fg

# vim: sts=4
